<div class="container-fluid margin-top-65">
  <h4 class="table-head">Query &amp; Issue Summary </h4>
  <div class="panel panel-default form-panel">
    <div class="panel-body">
      <form class="form-horizontal">
        <div class="form-group">
         <country-store display='summaryBlock'usrCtry={{usrCtry}} usrStore={{usrStore}}> </country-store>
          <div class="col-lg-2 col-md-3 col-sm-6">
            <div class="input-group date margin-bottom-10 datepick" id="datetimepicker1">
              <p-calendar dateFormat="dd/mm/yy" [showIcon]="true" placeholder="Form"></p-calendar>
            </div>
          </div>
          <div class="col-lg-2 col-md-3 col-sm-6">
            <div class="input-group date margin-bottom-10 datepick" id="datetimepicker2">
              <p-calendar dateFormat="dd/mm/yy" [showIcon]="true" placeholder="To"></p-calendar>
            </div>
          </div>
          <div class="col-lg-2 col-md-12 col-sm-12 margin-bottom-10 text-center">
            <button pButton type="button" class="ui-button-info" icon="fa-search" label="Submit"></button>
          </div>
        </div>
      </form>
    </div>
  </div>
   <div class="ui-widget-header" style="padding:4px 10px;border-bottom: 0 none">
      <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
      <input #gb type="text" pInputText size="50" placeholder="Global Filter">
      <button type="button" pButton icon="fa-file-o" iconPos="left" label="Export" (click)="dt.exportCSV()" style="float:right"></button>
   </div>
   <p-dataTable [value]="querySummaryData" selectionMode="single"  (onRowDblclick)="onRowDblclick($event)" 
   dataKey="uniqueId"  #dt  [rows]="25" [paginator]="true" [globalFilter]="gb"  [pageLinks]="10"
    resizableColumns="true" [rowsPerPageOptions]="[10,25,50,100]">
   <p-column field="country" header="Country" [sortable]="true"></p-column>
   <p-column field="store" header="Store" [sortable]="true"></p-column>
   <p-column field="date" header="Date" [sortable]="true"></p-column>
   <p-column field="query" header="Q/I" [sortable]="true"></p-column>
   <p-column field="type" header="Type" [sortable]="true"></p-column>
   <p-column field="brand" header="Brand" [sortable]="true"></p-column>
   <p-column field="product" header="Product" [sortable]="true"></p-column>
   <p-column field="priority" header="Priority" [sortable]="true"></p-column>
   <p-column field="detail" header="Detail" [sortable]="true"></p-column>
   <p-column field="abfrlresp" header="ABFRL Response" [sortable]="true"></p-column>
   <p-column field="cstatus" header="Current Status" [sortable]="true"></p-column>
   <p-column field="closure" header="Closure Date" [sortable]="true"></p-column>
   <p-column field="result" header="Result" [sortable]="true"></p-column>
   </p-dataTable>
   <p-dialog header="Query & Issue Response" [(visible)]="displayDialog"  showEffect="fade"    [modal]="true">
   <div class="row container" *ngIf="data" style="width:500px">
      <div class="row">
         <div class="col-md-6">
            <div class="row">
               <div class="col-md-4"><label for="country">Country</label></div>
               <div class="col-md-8">{{data.country}}</div>
            </div>
         </div>
         <div class="col-md-6">
            <div class="row" >
               <div class="col-md-4"><label for="store">Store</label></div>
               <div class="col-md-8">{{data.store}}</div>
            </div>
         </div>
      </div>
      <div class="row">
         <div class="col-md-6">
            <div class="row">
               <div class="col-md-4"><label for="date">Date</label></div>
               <div class="col-md-4">{{data.date}}</div>
            </div>
         </div>
         <div class="col-md-6">
            <div class="row">
               <div class="col-md-4"><label for="color">Query</label></div>
               <div class="col-md-4">{{data.query}}</div>
            </div>
         </div>
      </div>
      <div class="row">
         <div class="col-md-6">
            <div class="row">
               <div class="col-md-4"><label for="type">Type</label></div>
               <div class="col-md-8">{{data.type}}</div>
            </div>
         </div>
         <div class="col-md-6">
            <div class="row">
               <div class="col-md-4"><label for="brand">Brand</label></div>
               <div class="col-md-4">{{data.brand}}</div>
            </div>
         </div>
      </div>
      <div class="row">
         <div class="col-md-6">
            <div class="row">
               <div class="col-md-4"><label for="product">Product</label></div>
               <div class="col-md-8">{{data.product}}</div>
            </div>
         </div>
         <div class="col-md-6">
            <div class="row">
               <div class="col-md-4"><label for="priority">Priority</label></div>
               <div class="col-md-8">{{data.priority}}</div>
            </div>
         </div>
      </div>
       <div class="row">
         <div class="col-md-4"><label for="detail">Detail</label></div>
         <div class="col-md-8">{{data.detail}}</div>
      </div>
    <hr>
      <div class="row">
         <div class="col-md-4"><label for="abfrlresp">ABFRL Response</label></div>
         <div class="col-md-8"><textarea pInputTextarea  [(ngModel)]="data.abfrlresp"></textarea></div>
      </div>
       
      <div class="row" style="margin-bottom:20px">
         <div class="col-md-4"><label for="cstatus">Current Status</label></div>
         <!--<div class="ui-grid-col-8">{{data.cstatus}}</div>-->
        <div class="col-md-8">
                    <select class="form-control" name="status" [(ngModel)]="data.status">
                      <option value="open" selected="selected">Open</option>
                      <option value="pending">Pending</option>
                      <option value="closed">Closed</option>
                    </select>
        </div>
      </div>
    
      <div class="row" style="margin-bottom:20px">
         <div class="col-md-4"><label for="result">Result</label></div>
         <!--<div class="ui-grid-col-8">{{data.result}}</div>-->
            <div class="col-md-8">
                    <select class="form-control" name="result" [(ngModel)]="data.result">
                      <option value="fully closed" selected="selected">Fully Closed</option>
                      <option value="raise new query">Raise New Query</option>
                    </select>
             </div>
      </div>
      
   </div>
   <p-footer>
      <div class="ui-dialog-buttonpane ui-helper-clearfix">
         <button type="button" pButton icon="fa-close" (click)="cancel()" label="Cancel"></button>
         <button type="button" pButton icon="fa-check" (click)="save()" label="Submit"></button>
      </div>
   </p-footer>
   </p-dialog>
</div>